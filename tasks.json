{
  "project": "Agora - AI Philosopher Debate Platform",
  "version": "1.0",
  "description": "Development tasks for MVP demo organized by phase with dependencies",
  "phases": {
    "1": "Core Setup",
    "2": "Backend Development",
    "3": "Frontend Development",
    "4": "Integration & Polish"
  },
  "tasks": [
    {
      "id": "setup-01",
      "title": "Initialize Flutter Project",
      "description": "Create new Flutter project in the 'app' folder with cross-platform support (Web, iOS, Android, Desktop). Use package name 'com.itsgg.agora' and app name 'Agora'. Set up basic project structure, dependencies, and configuration files.",
      "phase": 1,
      "dependencies": [],
      "status": "completed",
      "acceptanceCriteria": [
        "Flutter project created in 'app' folder and runs on at least one platform",
        "Package name set to 'com.itsgg.agora'",
        "App name set to 'Agora'",
        "Project structure follows Flutter best practices",
        "Basic dependencies configured"
      ]
    },
    {
      "id": "setup-02",
      "title": "Initialize Serverpod Backend Project",
      "description": "Create Serverpod backend project structure in the 'backend' folder. Run 'serverpod create agora' (or similar), then reorganize the generated structure: move server to 'backend' folder, update package names in pubspec.yaml files (server, client, and Flutter app) to use 'com.itsgg.agora' format, and set app name to 'Agora'. Configure Serverpod framework, set up basic endpoint structure, and configure development server.",
      "phase": 1,
      "dependencies": [],
      "status": "pending",
      "acceptanceCriteria": [
        "Serverpod project created and reorganized into 'backend' folder structure",
        "Package names configured as 'com.itsgg.agora' in server, client, and Flutter app pubspec.yaml files",
        "App name set to 'Agora' in Flutter app configuration",
        "Serverpod project runs locally",
        "Basic endpoint structure in place",
        "Serverpod code generation working"
      ]
    },
    {
      "id": "setup-03",
      "title": "Configure PostgreSQL Database on Digital Ocean",
      "description": "Set up PostgreSQL database instance on Digital Ocean. Create database, configure connection settings, and set up basic security.",
      "phase": 1,
      "dependencies": [],
      "status": "completed",
      "acceptanceCriteria": [
        "PostgreSQL database created and accessible",
        "Connection credentials secured",
        "Database accessible from Serverpod backend"
      ]
    },
    {
      "id": "setup-04",
      "title": "Configure Serverpod Database Connection",
      "description": "Connect Serverpod backend to PostgreSQL database. Configure database connection in Serverpod config files and test connectivity.",
      "phase": 1,
      "dependencies": ["setup-02", "setup-03"],
      "status": "pending",
      "acceptanceCriteria": [
        "Serverpod can connect to PostgreSQL database",
        "Database connection tested and verified",
        "Connection settings properly configured"
      ]
    },
    {
      "id": "setup-05",
      "title": "Set Up OpenRouter API Integration",
      "description": "Configure OpenRouter API access. Set up API key management, create service class for OpenRouter API calls, and test basic API connectivity.",
      "phase": 1,
      "dependencies": ["setup-02"],
      "status": "pending",
      "acceptanceCriteria": [
        "OpenRouter API key configured securely (environment variable)",
        "Basic API service class created",
        "Can make test API call to OpenRouter"
      ]
    },
    {
      "id": "setup-06",
      "title": "Configure Environment Variables",
      "description": "Set up environment variable management for API keys, database credentials, and other configuration. Ensure secure handling of sensitive data.",
      "phase": 1,
      "dependencies": ["setup-02", "setup-05"],
      "status": "pending",
      "acceptanceCriteria": [
        "Environment variables configured for all services",
        "No hardcoded secrets in code",
        "Environment setup documented"
      ]
    },
    {
      "id": "backend-01",
      "title": "Create Question Serverpod Model",
      "description": "Create Question model in Serverpod with fields: id, text, createdAt, status (pending, processing, completed, failed). Run code generation and create database migration.",
      "phase": 2,
      "dependencies": ["setup-04"],
      "status": "pending",
      "acceptanceCriteria": [
        "Question model created with all required fields",
        "Database migration generated and applied",
        "Model accessible from Serverpod endpoints"
      ]
    },
    {
      "id": "backend-02",
      "title": "Create Philosopher Serverpod Model",
      "description": "Create Philosopher model with fields: id, name, tradition, description, systemPrompt, avatar, color. Run code generation and create database migration.",
      "phase": 2,
      "dependencies": ["setup-04"],
      "status": "pending",
      "acceptanceCriteria": [
        "Philosopher model created with all required fields",
        "Database migration generated and applied",
        "Model accessible from Serverpod endpoints"
      ]
    },
    {
      "id": "backend-03",
      "title": "Create Debate Serverpod Model",
      "description": "Create Debate model with fields: id, questionId, philosopherIds (list), arguments (list), status, createdAt, completedAt, rounds, totalTokens. Run code generation and create database migration.",
      "phase": 2,
      "dependencies": ["backend-01", "backend-02"],
      "status": "pending",
      "acceptanceCriteria": [
        "Debate model created with all required fields and relationships",
        "Database migration generated and applied",
        "Model accessible from Serverpod endpoints"
      ]
    },
    {
      "id": "backend-04",
      "title": "Create Argument Serverpod Model",
      "description": "Create Argument model with fields: id, debateId, philosopherId, philosopherName, round, content, timestamp, order. Run code generation and create database migration.",
      "phase": 2,
      "dependencies": ["backend-02", "backend-03"],
      "status": "pending",
      "acceptanceCriteria": [
        "Argument model created with all required fields",
        "Database migration generated and applied",
        "Model accessible from Serverpod endpoints"
      ]
    },
    {
      "id": "backend-05",
      "title": "Create Initial Philosopher Data (2 Philosophers)",
      "description": "Create system prompts and data for 2 philosophers. Choose contrasting styles (e.g., Socrates vs Marcus Aurelius, or Nietzsche vs Kant). Include name, tradition, description, systemPrompt, avatar, and color for each.",
      "phase": 2,
      "dependencies": ["backend-02"],
      "status": "pending",
      "acceptanceCriteria": [
        "2 philosophers created with complete system prompts",
        "Philosophers have distinct personalities and styles",
        "Philosopher data seeded in database"
      ]
    },
    {
      "id": "backend-06",
      "title": "Implement Philosopher List Endpoint",
      "description": "Create listPhilosophers() method endpoint to list all available philosophers. Return philosopher details including name, tradition, description, avatar, and color.",
      "phase": 2,
      "dependencies": ["backend-02", "backend-05"],
      "status": "pending",
      "acceptanceCriteria": [
        "Endpoint returns list of all philosophers",
        "Response includes all required philosopher fields",
        "Endpoint tested and working"
      ]
    },
    {
      "id": "backend-07",
      "title": "Implement Question Submission Endpoint",
      "description": "Create submitQuestion(String text) method endpoint to submit new questions. Validate question (length 10-500 chars), create Question record, and return Question object.",
      "phase": 2,
      "dependencies": ["backend-01"],
      "status": "pending",
      "acceptanceCriteria": [
        "Endpoint accepts question text and validates length",
        "Question saved to database with pending status",
        "Returns Question object with id",
        "Error handling for invalid inputs"
      ]
    },
    {
      "id": "backend-08",
      "title": "Implement Get Question Endpoint",
      "description": "Create getQuestion(int id) method endpoint to retrieve question details by ID.",
      "phase": 2,
      "dependencies": ["backend-01"],
      "status": "pending",
      "acceptanceCriteria": [
        "Endpoint returns question by ID",
        "Handles non-existent questions gracefully",
        "Endpoint tested and working"
      ]
    },
    {
      "id": "backend-09",
      "title": "Implement OpenRouter Streaming Service",
      "description": "Create service class to handle OpenRouter API streaming calls. Implement token streaming, parse SSE responses, and handle connection errors. Support for system prompts and conversation context.",
      "phase": 2,
      "dependencies": ["setup-05"],
      "status": "pending",
      "acceptanceCriteria": [
        "Service can make streaming API calls to OpenRouter",
        "Can parse and handle streaming responses",
        "Error handling and retry logic implemented",
        "Supports system prompts and conversation context"
      ]
    },
    {
      "id": "backend-10",
      "title": "Implement Debate Generation Logic",
      "description": "Create core logic for generating debates. Implement sequential turn-based generation where philosophers alternate, each responding to previous arguments. Support multiple rounds (3-4 rounds). Maintain conversation context for each philosopher.",
      "phase": 2,
      "dependencies": ["backend-09", "backend-03", "backend-04", "backend-05"],
      "status": "pending",
      "acceptanceCriteria": [
        "Debate generation follows sequential turn-based format",
        "Each philosopher responds to previous arguments",
        "Supports configurable number of rounds",
        "Maintains character consistency through system prompts",
        "Arguments meet length constraints (100-500 tokens)"
      ]
    },
    {
      "id": "backend-11",
      "title": "Implement Start Debate Endpoint",
      "description": "Create startDebate(int questionId, List<int> philosopherIds) method endpoint. Accepts questionId and philosopherIds (2 philosophers selected by user), creates Debate record, and initiates debate generation.",
      "phase": 2,
      "dependencies": ["backend-03", "backend-10"],
      "status": "pending",
      "acceptanceCriteria": [
        "Endpoint creates Debate record with correct questionId",
        "Accepts philosopherIds list from client (2 philosophers selected by user)",
        "Initiates debate generation process",
        "Returns Debate object with id"
      ]
    },
    {
      "id": "backend-12",
      "title": "Implement Real-time Streaming Endpoint (SSE/WebSocket)",
      "description": "Create streamDebate(int id) method endpoint using Serverpod native streaming (SSE). Stream Argument objects as they are generated in real-time. Handle connection drops and resume if possible.",
      "phase": 2,
      "dependencies": ["backend-10", "backend-11"],
      "status": "pending",
      "acceptanceCriteria": [
        "Endpoint streams arguments as they are generated",
        "Uses Serverpod streaming capabilities (SSE or WebSocket)",
        "Handles connection drops gracefully",
        "Streams Argument objects with all required fields"
      ]
    },
    {
      "id": "backend-13",
      "title": "Implement Get Debate Endpoint",
      "description": "Create getDebate(int id) method endpoint to retrieve debate details including all arguments.",
      "phase": 2,
      "dependencies": ["backend-03"],
      "status": "pending",
      "acceptanceCriteria": [
        "Endpoint returns debate by ID with all arguments",
        "Handles non-existent debates gracefully",
        "Endpoint tested and working"
      ]
    },
    {
      "id": "backend-14",
      "title": "Implement Rate Limiting",
      "description": "Add basic rate limiting to prevent API abuse. Configure limits appropriate for demo purposes (5-10 concurrent debates).",
      "phase": 2,
      "dependencies": ["backend-11"],
      "status": "pending",
      "acceptanceCriteria": [
        "Rate limiting implemented for question submission",
        "Rate limiting implemented for debate generation",
        "Limits configured for demo scale",
        "Proper error messages for rate limit exceeded"
      ]
    },
    {
      "id": "frontend-01",
      "title": "Set Up State Management",
      "description": "Choose and configure state management solution (Provider, Riverpod, or Bloc). Set up basic state management structure for question submission and debate viewing.",
      "phase": 3,
      "dependencies": ["setup-01"],
      "status": "pending",
      "acceptanceCriteria": [
        "State management solution chosen and configured",
        "Basic state management structure in place",
        "Can manage app state for questions and debates"
      ]
    },
    {
      "id": "frontend-02",
      "title": "Set Up Serverpod Client in Flutter",
      "description": "Configure Serverpod client in Flutter app. Set up connection to backend, configure client for API calls and streaming.",
      "phase": 3,
      "dependencies": ["setup-01", "setup-02"],
      "status": "pending",
      "acceptanceCriteria": [
        "Serverpod client configured and connected to backend",
        "Can make API calls from Flutter app",
        "Streaming connection configured"
      ]
    },
    {
      "id": "frontend-02a",
      "title": "Test Serverpod Integration",
      "description": "Create and run integration tests to verify Serverpod client connectivity and functionality. Test basic API calls (GET/POST), data serialization/deserialization, error handling (connection failures, invalid responses), and streaming connection if available. Verify client configuration is correct and backend is accessible from Flutter app.",
      "phase": 3,
      "dependencies": ["frontend-02", "backend-06"],
      "status": "pending",
      "acceptanceCriteria": [
        "Integration tests verify Serverpod client can connect to backend",
        "Method calls work correctly (e.g., listPhilosophers())",
        "Data models serialize/deserialize correctly",
        "Error handling works for connection failures",
        "Error handling works for invalid responses",
        "Streaming connection tested (if streaming method available)",
        "All tests pass and integration is verified"
      ]
    },
    {
      "id": "frontend-03",
      "title": "Create Question Input Screen",
      "description": "Build home screen with app title/logo, brief description, question input form (text field with validation), philosopher selection (select 2 philosophers from available options), submit button, and loading indicator. Validate question length (10-500 chars) and ensure exactly 2 philosophers are selected.",
      "phase": 3,
      "dependencies": ["frontend-01", "frontend-02", "frontend-05", "frontend-12"],
      "status": "pending",
      "acceptanceCriteria": [
        "Question input screen matches design requirements",
        "Philosopher selection integrated on question submission screen",
        "Users can select exactly 2 philosophers from available options",
        "Input validation works (length, content)",
        "Submit button enabled only when question is valid and 2 philosophers selected",
        "Submit button triggers question submission",
        "Loading indicator shows during processing",
        "Error handling for invalid inputs"
      ]
    },
    {
      "id": "frontend-04",
      "title": "Implement Question Submission Service",
      "description": "Create service class to handle question submission via Serverpod client. Call submitQuestion() method and handle responses/errors.",
      "phase": 3,
      "dependencies": ["frontend-02", "frontend-02a", "backend-07"],
      "status": "pending",
      "acceptanceCriteria": [
        "Service can submit questions to backend",
        "Handles success and error responses",
        "Returns Question object on success"
      ]
    },
    {
      "id": "frontend-05",
      "title": "Create Philosopher Card/Widget Component",
      "description": "Create reusable widget for displaying philosopher information. Include philosopher name, avatar/icon, tradition badge/chip, and color scheme. Make it visually distinct.",
      "phase": 3,
      "dependencies": ["frontend-01"],
      "status": "pending",
      "acceptanceCriteria": [
        "Philosopher card component created and reusable",
        "Displays all required philosopher information",
        "Visual design distinguishes each philosopher",
        "Responsive and accessible"
      ]
    },
    {
      "id": "frontend-06",
      "title": "Create Argument Card/Widget Component",
      "description": "Create widget for displaying individual arguments. Include philosopher card, argument text (with streaming text animation support), and timestamp. Style based on philosopher color.",
      "phase": 3,
      "dependencies": ["frontend-05"],
      "status": "pending",
      "acceptanceCriteria": [
        "Argument card component created",
        "Displays philosopher info, argument text, and timestamp",
        "Supports streaming text animation",
        "Styled with philosopher's color scheme"
      ]
    },
    {
      "id": "frontend-07",
      "title": "Create Debate View Screen Layout",
      "description": "Build debate view screen with question display at top (sticky header), scrollable debate timeline/thread view, and argument cards. Include 'New Question' button.",
      "phase": 3,
      "dependencies": ["frontend-06"],
      "status": "pending",
      "acceptanceCriteria": [
        "Debate view screen layout matches design",
        "Question displayed at top (sticky)",
        "Scrollable timeline for arguments",
        "'New Question' button functional"
      ]
    },
    {
      "id": "frontend-08",
      "title": "Implement Real-time Streaming UI Updates",
      "description": "Implement real-time updates to debate view as arguments stream in. Update UI as tokens arrive, show streaming text animation, and handle connection state.",
      "phase": 3,
      "dependencies": ["frontend-07", "frontend-02", "frontend-02a", "backend-12"],
      "status": "pending",
      "acceptanceCriteria": [
        "UI updates in real-time as arguments stream",
        "Streaming text animation works smoothly",
        "Handles connection drops gracefully",
        "Updates appear without lag (< 500ms latency)"
      ]
    },
    {
      "id": "frontend-09",
      "title": "Implement Auto-scroll to Latest Argument",
      "description": "Add auto-scroll functionality to debate view. Automatically scroll to latest argument as new arguments arrive, with option to disable if user scrolls up.",
      "phase": 3,
      "dependencies": ["frontend-07", "frontend-08"],
      "status": "pending",
      "acceptanceCriteria": [
        "Auto-scrolls to latest argument when new arguments arrive",
        "Respects user scroll position (pauses if user scrolls up)",
        "Smooth scrolling animation"
      ]
    },
    {
      "id": "frontend-10",
      "title": "Implement Loading/Thinking Indicators",
      "description": "Add visual indicators when philosophers are generating responses. Show 'thinking' state for each philosopher when they are generating their next argument.",
      "phase": 3,
      "dependencies": ["frontend-07", "frontend-08"],
      "status": "pending",
      "acceptanceCriteria": [
        "Loading indicators show when philosophers are thinking",
        "Indicators are visually distinct per philosopher",
        "Indicators disappear when argument starts streaming"
      ]
    },
    {
      "id": "frontend-11",
      "title": "Implement Debate Navigation Flow",
      "description": "Connect question submission to debate viewing. After question submission, automatically start debate using startDebate() with questionId and selected philosopherIds (2 philosophers), then navigate to debate view. Handle debate initialization and streaming start.",
      "phase": 3,
      "dependencies": ["frontend-03", "frontend-04", "frontend-07", "backend-11"],
      "status": "pending",
      "acceptanceCriteria": [
        "Question submission triggers debate start with selected philosopherIds",
        "startDebate() called with correct questionId and philosopherIds",
        "Navigation to debate view works",
        "Debate streaming starts automatically",
        "Error handling for failed debate start"
      ]
    },
    {
      "id": "frontend-12",
      "title": "Implement Philosopher List Loading",
      "description": "Load and display available philosophers. Call listPhilosophers() method and store philosopher data for use in question submission screen and debate view.",
      "phase": 3,
      "dependencies": ["frontend-02", "frontend-02a", "backend-06"],
      "status": "pending",
      "acceptanceCriteria": [
        "Philosopher list loaded from backend",
        "Philosopher data stored in state",
        "Data available for debate view"
      ]
    },
    {
      "id": "frontend-13",
      "title": "Apply Design System and Styling",
      "description": "Apply color scheme (classical/thoughtful palette), typography (readable serif or sans-serif), and ensure responsive design works on mobile, tablet, and desktop.",
      "phase": 3,
      "dependencies": ["frontend-03", "frontend-07"],
      "status": "pending",
      "acceptanceCriteria": [
        "Color scheme applied consistently",
        "Typography readable and appropriate",
        "Responsive design works on all screen sizes",
        "WCAG 2.1 AA accessibility compliance"
      ]
    },
    {
      "id": "frontend-14",
      "title": "Cross-platform Testing (Web, Mobile)",
      "description": "Test Flutter app on web and at least one mobile platform (iOS or Android). Verify all features work correctly, UI is responsive, and streaming works on all platforms.",
      "phase": 3,
      "dependencies": ["frontend-11", "frontend-13"],
      "status": "pending",
      "acceptanceCriteria": [
        "App tested on web platform",
        "App tested on mobile platform (iOS or Android)",
        "All features work on both platforms",
        "UI responsive and functional on all platforms"
      ]
    },
    {
      "id": "integration-01",
      "title": "End-to-End Integration Testing",
      "description": "Test complete flow from question submission through debate generation and streaming. Verify frontend-backend communication, streaming works end-to-end, and data persistence.",
      "phase": 4,
      "dependencies": ["frontend-11", "backend-12"],
      "status": "pending",
      "acceptanceCriteria": [
        "Complete flow tested end-to-end",
        "Question submission works",
        "Debate generation works",
        "Real-time streaming works",
        "Data persists correctly in database"
      ]
    },
    {
      "id": "integration-02",
      "title": "Implement Comprehensive Error Handling",
      "description": "Add error handling throughout the application. Handle API errors, network failures, streaming connection drops, invalid inputs, and edge cases. Provide user-friendly error messages.",
      "phase": 4,
      "dependencies": ["frontend-11", "backend-12"],
      "status": "pending",
      "acceptanceCriteria": [
        "Error handling for all API calls",
        "Network failure handling",
        "Streaming error recovery",
        "User-friendly error messages",
        "Graceful degradation"
      ]
    },
    {
      "id": "integration-03",
      "title": "UI/UX Polish and Animations",
      "description": "Polish UI/UX with smooth animations, transitions, and visual feedback. Ensure professional appearance suitable for demo presentation.",
      "phase": 4,
      "dependencies": ["frontend-13"],
      "status": "pending",
      "acceptanceCriteria": [
        "Smooth animations and transitions",
        "Visual feedback for user actions",
        "Professional appearance",
        "Consistent design language"
      ]
    },
    {
      "id": "integration-04",
      "title": "Performance Optimization",
      "description": "Optimize app performance. Ensure question submission < 2 seconds, first argument streams within 5-10 seconds, streaming latency < 500ms, and app load < 3 seconds.",
      "phase": 4,
      "dependencies": ["integration-01"],
      "status": "pending",
      "acceptanceCriteria": [
        "Question submission response time < 2 seconds",
        "First argument streams within 5-10 seconds",
        "Streaming latency < 500ms",
        "App load time < 3 seconds"
      ]
    },
    {
      "id": "integration-05",
      "title": "Add Logging and Monitoring",
      "description": "Implement logging for debugging and monitoring. Log API calls, errors, debate generation progress, and performance metrics.",
      "phase": 4,
      "dependencies": ["backend-12", "frontend-11"],
      "status": "pending",
      "acceptanceCriteria": [
        "Logging implemented for key operations",
        "Error logging in place",
        "Performance metrics logged",
        "Logs useful for debugging"
      ]
    },
    {
      "id": "integration-06",
      "title": "Demo Preparation and Testing",
      "description": "Prepare for demo presentation. Test all features thoroughly, prepare demo questions, verify everything works smoothly, and create demo script if needed.",
      "phase": 4,
      "dependencies": ["integration-01", "integration-02", "integration-03", "integration-04"],
      "status": "pending",
      "acceptanceCriteria": [
        "All features tested and working",
        "Demo questions prepared",
        "Smooth demo flow verified",
        "Ready for presentation"
      ]
    }
  ]
}
